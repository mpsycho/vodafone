<div class="container">
  <h2>Home</h2>
  <table class="table table-bordered">
    <thead>
      <tr>
        <th scope="col">User ID</th>
        <th scope="col">Username</th>
        <th scope="col">Email</th>
        <th scope="col">City</th>
        <th scope="col">Phone</th>
        <th scope="col">Company name</th>
        <th scope="col">Actions</th>
      </tr>
    </thead>
    <tbody *ngFor="let user of users; let i = index">
      <tr>
        <td>{{ user.id }}</td>
        <td>{{ user.username }}</td>
        <td>{{ user.email }}</td>
        <td>{{ user.address.city }}</td>
        <td>{{ user.phone }}</td>
        <td>{{ user.company.name }}</td>
        <td scope="col">
          <button
            type="button"
            (click)="openModal(viewProfileModal, user, i)"
            class="btn btn-primary"
          >
            View
          </button>
          <button
            type="button"
            class="btn btn-warning ml-2"
            (click)="openModal(editProfileModal, user, i)"
          >
            Edit
          </button>
          <button (click)="onDelete(i)" class="mt-2 btn btn-danger">
            Delete
          </button>
        </td>
      </tr>
    </tbody>
  </table>

  <form [formGroup]="userForm" (ngSubmit)="onSubmitNewUser()">
    <h3>Create New User</h3>
    <div class="row">
      <div class="form-group col-6">
        <label for="username">Username</label>
        <input
          type="text"
          id="username"
          formControlName="username"
          class="form-control"
        />
      </div>
      <div class="form-group col-6">
        <label for="email">Email</label>
        <input
          type="text"
          id="email"
          formControlName="email"
          class="form-control"
        />
      </div>
    </div>
    <div class="row">
      <div class="form-group col-6" formGroupName="address">
        <label for="city">City</label>
        <input
          type="text"
          id="city"
          formControlName="city"
          class="form-control"
        />
      </div>
      <div class="form-group col-6">
        <label for="phone">Phone</label>
        <input
          type="text"
          id="phone"
          formControlName="phone"
          class="form-control"
        />
      </div>
    </div>
    <div class="row">
      <div class="form-group col-12" formGroupName="company">
        <label for="company">Company name</label>
        <input
          type="text"
          id="name"
          formControlName="name"
          class="form-control"
        />
      </div>
    </div>
    <button type="submit" class="btn btn-success" [disabled]="!userForm.valid">
      Save
    </button>
  </form>
</div>

<ng-template #editProfileModal let-modal>
  <div class="modal-header">
    <h5 class="modal-title" id="editProfileLabel">Edit Profile</h5>
    <button
      type="button"
      class="close"
      (click)="modal.dismiss()"
      aria-label="Close"
    >
      <span aria-hidden="true">&times;</span>
    </button>
  </div>

  <div class="modal-body">
    <form [formGroup]="editProfileForm" (ngSubmit)="onSubmitEditUser()">
      <div class="form-group row">
        <label for="username" class="col-sm-4 col-form-label">ID</label>
        <div class="col-sm-8">
          <input
            type="id"
            class="form-control"
            formControlName="id"
            id="id"
            disabled
          />
        </div>
      </div>
      <div class="form-group row">
        <label for="username" class="col-sm-4 col-form-label">Username</label>
        <div class="col-sm-8">
          <input
            type="text"
            class="form-control"
            formControlName="username"
            id="username"
          />
        </div>
      </div>
      <div class="form-group row">
        <label for="email" class="col-sm-4 col-form-label">Email</label>
        <div class="col-sm-8">
          <input
            type="text"
            class="form-control"
            formControlName="email"
            id="email"
          />
        </div>
      </div>
      <div class="form-group row">
        <label for="city" class="col-sm-4 col-form-label">City</label>
        <div class="col-sm-8">
          <input
            type="text"
            class="form-control"
            formControlName="city"
            id="city"
          />
        </div>
      </div>
      <div class="form-group row">
        <label for="phone" class="col-sm-4 col-form-label">Phone</label>
        <div class="col-sm-8">
          <input
            type="email"
            class="form-control"
            formControlName="phone"
            id="phone"
          />
        </div>
      </div>
      <div class="form-group row">
        <label for="company" class="col-sm-4 col-form-label"
          >Company name</label
        >
        <div class="col-sm-8">
          <input
            type="email"
            class="form-control"
            formControlName="company"
            id="company"
          />
        </div>
      </div>
      <div class="modal-footer">
        <button
          type="button"
          class="btn btn-secondary"
          (click)="modal.dismiss()"
        >
          Close
        </button>
        <button type="submit" class="btn btn-primary">Save changes</button>
      </div>
    </form>
  </div>
</ng-template>

<ng-template #viewProfileModal let-modal>
  <div class="modal-header">
    <h5 class="modal-title" id="editProfileLabel">View Profile</h5>
    <button
      type="button"
      class="close"
      (click)="modal.dismiss()"
      aria-label="Close"
    >
      <span aria-hidden="true">&times;</span>
    </button>
  </div>

  <div class="modal-body">
    <form [formGroup]="editProfileForm">
      <div class="form-group row">
        <label for="username" class="col-sm-4 col-form-label">Username</label>
        <div class="col-sm-8">
          <input
            type="text"
            class="form-control"
            formControlName="username"
            id="username"
            disabled
          />
        </div>
      </div>
      <div class="form-group row">
        <label for="email" class="col-sm-4 col-form-label">Email</label>
        <div class="col-sm-8">
          <input
            type="text"
            class="form-control"
            formControlName="email"
            id="email"
            disabled
          />
        </div>
      </div>
      <div class="form-group row">
        <label for="city" class="col-sm-4 col-form-label">City</label>
        <div class="col-sm-8">
          <input
            type="text"
            class="form-control"
            formControlName="city"
            id="city"
            disabled
          />
        </div>
      </div>
      <div class="form-group row">
        <label for="phone" class="col-sm-4 col-form-label">Phone</label>
        <div class="col-sm-8">
          <input
            type="email"
            class="form-control"
            formControlName="phone"
            id="phone"
            disabled
          />
        </div>
      </div>
      <div class="form-group row">
        <label for="company" class="col-sm-4 col-form-label"
          >Company name</label
        >
        <div class="col-sm-8">
          <input
            type="email"
            class="form-control"
            formControlName="company"
            id="company"
            disabled
          />
        </div>
      </div>
      <div class="modal-footer">
        <button
          type="button"
          class="btn btn-secondary"
          (click)="modal.dismiss()"
        >
          Close
        </button>
      </div>
    </form>
  </div>
</ng-template>
